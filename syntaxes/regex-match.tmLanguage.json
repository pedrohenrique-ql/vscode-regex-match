{
  "name": "Regex Match",
  "scopeName": "source.rgx",
  "patterns": [
    {
      "name": "meta.test-block.rgx",
      "begin": "^(?=/)",
      "end": "^---\\s*$\\n^---\\s*$",
      "patterns": [
        { "include": "#regexp" },
        {
          "name": "meta.test-declaration.rgx",
          "begin": "^---\\s*$",
          "end": "^---\\s*$",
          "beginCaptures": {
            "0": { "name": "punctuation.separator.test.begin.rgx" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.separator.test.end.rgx" }
          },
          "patterns": [
            {
              "name": "text.test-content.rgx",
              "match": "^.*$"
            }
          ]
        }
      ]
    }
  ],
  "repository": {
    "regexp": {
      "patterns": [
        {
          "name": "string.regexp.rgx",
          "begin": "(/)",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.string.begin.rgx"
            }
          },
          "end": "/([dgimsuvy]*)",
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.end.rgx"
            },
            "1": {
              "name": "keyword.other.rgx"
            }
          },
          "patterns": [
            {
              "include": "#regex-body"
            }
          ]
        }
      ]
    },
    "regex-body": {
      "patterns": [
        {
          "name": "keyword.control.anchor.rgx",
          "match": "\\\\[bB]|\\^|\\$"
        },
        {
          "match": "\\\\[1-9]\\d*|\\\\k<([a-zA-Z_$][\\w$]*)>",
          "captures": {
            "0": {
              "name": "keyword.other.back-reference.rgx"
            },
            "1": {
              "name": "variable.other.rgx"
            }
          }
        },
        {
          "name": "keyword.operator.quantifier.rgx",
          "match": "[?+*]|\\{(\\d+,\\d+|\\d+,|,\\d+|\\d+)\\}\\??"
        },
        {
          "name": "keyword.operator.or.rgx",
          "match": "\\|"
        },
        {
          "name": "meta.group.assertion.rgx",
          "begin": "(\\()((\\?=)|(\\?!)|(\\?<=)|(\\?<!))",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.group.rgx" },
            "2": { "name": "punctuation.definition.group.assertion.rgx" },
            "3": { "name": "meta.assertion.look-ahead.rgx" },
            "4": { "name": "meta.assertion.negative-look-ahead.rgx" },
            "5": { "name": "meta.assertion.look-behind.rgx" },
            "6": { "name": "meta.assertion.negative-look-behind.rgx" }
          },
          "end": "(\\))",
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.group.rgx"
            }
          },
          "patterns": [
            {
              "include": "#regex-body"
            }
          ]
        },
        {
          "name": "meta.group.rgx",
          "begin": "\\((?:(\\?:)|(?:\\?<([a-zA-Z_$][\\w$]*)>))?",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.group.rgx"
            },
            "1": {
              "name": "punctuation.definition.group.no-capture.rgx"
            },
            "2": {
              "name": "variable.other.rgx"
            }
          },
          "end": "\\)",
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.group.rgx"
            }
          },
          "patterns": [
            {
              "include": "#regex-body"
            }
          ]
        },
        {
          "name": "constant.other.character-class.set.rgx",
          "begin": "(\\[)(\\^)?",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.character-class.rgx"
            },
            "2": {
              "name": "keyword.operator.negation.rgx"
            }
          },
          "end": "(\\])",
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.character-class.rgx"
            }
          },
          "patterns": [
            {
              "name": "constant.other.character-class.range.rgx",
              "match": "(?:.|(\\\\(?:[0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}))|(\\\\c[A-Z])|(\\\\.))\\-(?:[^\\]\\\\]|(\\\\(?:[0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}))|(\\\\c[A-Z])|(\\\\.))",
              "captures": {
                "1": { "name": "constant.character.numeric.rgx" },
                "2": { "name": "constant.character.control.rgx" },
                "3": { "name": "constant.character.escape.backslash.rgx" },
                "4": { "name": "constant.character.numeric.rgx" },
                "5": { "name": "constant.character.control.rgx" },
                "6": { "name": "constant.character.escape.backslash.rgx" }
              }
            },
            {
              "include": "#regex-character-class"
            }
          ]
        },
        {
          "include": "#regex-character-class"
        }
      ]
    },
    "regex-character-class": {
      "patterns": [
        {
          "name": "constant.other.character-class.rgx",
          "match": "\\\\[wWsSdDtrnvf]|\\."
        },
        {
          "name": "constant.character.numeric.rgx",
          "match": "\\\\([0-7]{3}|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4})"
        },
        {
          "name": "constant.character.control.rgx",
          "match": "\\\\c[A-Z]"
        },
        {
          "name": "constant.character.escape.backslash.rgx",
          "match": "\\\\."
        }
      ]
    }
  }
}
